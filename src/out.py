from generator.types import *
from generator.lexer import Token
from typing import List, Tuple, Union, Any, Literal, Dict, Callable, Optional


class Parser:
    def __init__(
        self,
        grammar: Grammar,
        callbacks: Optional[Dict[str, Callable[[List[Any]], Any]]] = None,
    ):
        self.callbacks = callbacks
        self.rule_map = {rule.name: rule for rule in grammar.rules}
        self.cache = {}

    def __take_leaf(
        self, l: Leaf, tokens: List[Token], pos: int
    ) -> Union[Tuple[Any, int], Literal[False]]:
        if pos >= len(tokens):
            return False
        if l.type == "LITERAL":
            # in the case of literals, l.value
            # contains the exact literal to match
            if tokens[pos].value != l.value:
                return False
            return tokens[pos], pos + 1
        elif l.type == "TERMINAL":
            # in the case of terminals, l.value
            # contains the type of the nonterminal
            if tokens[pos].type != l.value:
                return False
            return tokens[pos], pos + 1
        else:
            # in the case of nonterminals, l.value
            # contains the name of the nonterminal
            result = self.__check_rule(l.value, tokens, pos)
            if not result:
                return False
            return result

    def __take_leaves(
        self, l: List[Leaf], tokens: List[Token], pos: int
    ) -> Union[Tuple[List[Any], int], Literal[False]]:
        if pos >= len(tokens):
            return False
        result = []
        for leaf in l:
            r = self.__take_leaf(leaf, tokens, pos)
            if not r:
                return False
            res, pos = r
            result.append(res)
        return result, pos

    def __check_production(self, prod: Production, tokens: List[Token], pos: int):
        result = []
        for part in prod.items:
            if part.optional:
                # try taking, but it's ok if it fails
                r = self.__take_leaves(part.items, tokens, pos)
                if r:
                    # it actually succeeded, go with this
                    res, pos = r
                    result.append(res)
            elif part.star:
                # try taking any amount of this
                r = self.__take_leaves(part.items, tokens, pos)
                while r:
                    res, pos = r
                    result.append(res)
                    r = self.__take_leaves(part.items, tokens, pos)
            else:
                # must take this item
                r = self.__take_leaves(part.items, tokens, pos)
                if not r:
                    return False
                res, pos = r
                result.append(res)
        return result, pos

    def __check_rule(self, rule: str, tokens: List[Token], pos: int):
        # takes the rule that succeeds that takes the most tokens
        if (rule, pos) in self.cache:
            return self.cache[(rule, pos)]

        actual_rule = self.rule_map[rule]
        best = None
        for prod in actual_rule.productions:
            r = self.__check_production(prod, tokens, pos)
            if r and (best is None or best[1] < r[1]):
                best = r

        result = best if best is not None else False
        self.cache[(rule, pos)] = result
        return result

    def parse(
        self, start_symbol: str, tokens: List[Token]
    ) -> Union[list, Literal[False]]:
        self.cache = {}
        result = self.__check_rule(start_symbol, tokens, 0)
        if result:
            return result[0]
        return False

grammar = Grammar(rules=[Rule(name='primary_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='CONSTANT')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='STRINGLITERAL')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='expression'), Leaf(type='LITERAL', value=')')])])]), Rule(name='postfix_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='primary_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='primary_expression'), Leaf(type='LITERAL', value='['), Leaf(type='NONTERMINAL', value='expression'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='primary_expression'), Leaf(type='LITERAL', value='('), Leaf(type='LITERAL', value=')')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='primary_expression'), Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='argument_expression_list'), Leaf(type='LITERAL', value=')')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='primary_expression'), Leaf(type='LITERAL', value='.'), Leaf(type='TERMINAL', value='IDENTIFIER')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='primary_expression'), Leaf(type='LITERAL', value='->'), Leaf(type='TERMINAL', value='IDENTIFIER')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='primary_expression'), Leaf(type='LITERAL', value='++')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='primary_expression'), Leaf(type='LITERAL', value='--')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='type_name'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='initializer_list')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value=',')]), ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='}'), Leaf(type='LITERAL', value='['), Leaf(type='NONTERMINAL', value='expression'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='type_name'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='initializer_list')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value=',')]), ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='}'), Leaf(type='LITERAL', value='('), Leaf(type='LITERAL', value=')')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='type_name'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='initializer_list')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value=',')]), ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='}'), Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='argument_expression_list'), Leaf(type='LITERAL', value=')')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='type_name'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='initializer_list')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value=',')]), ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='}'), Leaf(type='LITERAL', value='.'), Leaf(type='TERMINAL', value='IDENTIFIER')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='type_name'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='initializer_list')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value=',')]), ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='}'), Leaf(type='LITERAL', value='->'), Leaf(type='TERMINAL', value='IDENTIFIER')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='type_name'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='initializer_list')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value=',')]), ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='}'), Leaf(type='LITERAL', value='++')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='type_name'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='initializer_list')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value=',')]), ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='}'), Leaf(type='LITERAL', value='--')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])])]), Rule(name='argument_expression_list', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='assignment_expression')]), ProductionPart(optional=False, star=True, items=[Leaf(type='LITERAL', value=','), Leaf(type='NONTERMINAL', value='assignment_expression')])])]), Rule(name='unary_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='postfix_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='++'), Leaf(type='NONTERMINAL', value='unary_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='--'), Leaf(type='NONTERMINAL', value='unary_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='unary_operator'), Leaf(type='NONTERMINAL', value='cast_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='sizeof'), Leaf(type='NONTERMINAL', value='unary_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='sizeof'), Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='type_name'), Leaf(type='LITERAL', value=')')])])]), Rule(name='unary_operator', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='&')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='*')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='+')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='-')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='~')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='!')])])]), Rule(name='cast_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='unary_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='type_name'), Leaf(type='LITERAL', value=')'), Leaf(type='NONTERMINAL', value='cast_expression')])])]), Rule(name='multiplicative_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='cast_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='cast_expression'), Leaf(type='LITERAL', value='*'), Leaf(type='NONTERMINAL', value='multiplicative_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='cast_expression'), Leaf(type='LITERAL', value='/'), Leaf(type='NONTERMINAL', value='multiplicative_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='cast_expression'), Leaf(type='LITERAL', value='%'), Leaf(type='NONTERMINAL', value='multiplicative_expression')])])]), Rule(name='additive_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='multiplicative_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='multiplicative_expression'), Leaf(type='LITERAL', value='+'), Leaf(type='NONTERMINAL', value='additive_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='multiplicative_expression'), Leaf(type='LITERAL', value='-'), Leaf(type='NONTERMINAL', value='additive_expression')])])]), Rule(name='shift_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='additive_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='additive_expression'), Leaf(type='LITERAL', value='<<'), Leaf(type='NONTERMINAL', value='shift_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='additive_expression'), Leaf(type='LITERAL', value='>>'), Leaf(type='NONTERMINAL', value='shift_expression')])])]), Rule(name='relational_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='shift_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='shift_expression'), Leaf(type='LITERAL', value='<'), Leaf(type='NONTERMINAL', value='relational_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='shift_expression'), Leaf(type='LITERAL', value='>'), Leaf(type='NONTERMINAL', value='relational_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='shift_expression'), Leaf(type='LITERAL', value='<='), Leaf(type='NONTERMINAL', value='relational_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='shift_expression'), Leaf(type='LITERAL', value='>='), Leaf(type='NONTERMINAL', value='relational_expression')])])]), Rule(name='equality_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='relational_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='relational_expression'), Leaf(type='LITERAL', value='=='), Leaf(type='NONTERMINAL', value='equality_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='relational_expression'), Leaf(type='LITERAL', value='!='), Leaf(type='NONTERMINAL', value='equality_expression')])])]), Rule(name='and_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='equality_expression')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value='&'), Leaf(type='NONTERMINAL', value='and_expression')])])]), Rule(name='exclusive_or_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='and_expression')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value='^'), Leaf(type='NONTERMINAL', value='exclusive_or_expression')])])]), Rule(name='inclusive_or_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='exclusive_or_expression')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value='|'), Leaf(type='NONTERMINAL', value='inclusive_or_expression')])])]), Rule(name='logical_and_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='inclusive_or_expression')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value='&&'), Leaf(type='NONTERMINAL', value='logical_and_expression')])])]), Rule(name='logical_or_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='logical_and_expression')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value='||'), Leaf(type='NONTERMINAL', value='logical_or_expression')])])]), Rule(name='conditional_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='logical_or_expression')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value='?'), Leaf(type='NONTERMINAL', value='expression'), Leaf(type='LITERAL', value=':'), Leaf(type='NONTERMINAL', value='conditional_expression')])])]), Rule(name='assignment_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='conditional_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='unary_expression'), Leaf(type='NONTERMINAL', value='assignment_operator'), Leaf(type='NONTERMINAL', value='assignment_expression')])])]), Rule(name='assignment_operator', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='=')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='*=')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='/=')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='%=')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='+=')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='-=')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='<<=')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='>>=')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='&=')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='^=')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='|=')])])]), Rule(name='expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='assignment_expression')]), ProductionPart(optional=False, star=True, items=[Leaf(type='LITERAL', value=','), Leaf(type='NONTERMINAL', value='assignment_expression')])])]), Rule(name='constant_expression', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='conditional_expression')])])]), Rule(name='declaration', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='declaration_specifiers'), Leaf(type='LITERAL', value=';')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='declaration_specifiers'), Leaf(type='NONTERMINAL', value='init_declarator_list'), Leaf(type='LITERAL', value=';')])])]), Rule(name='declaration_specifiers', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='storage_class_specifier')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='storage_class_specifier'), Leaf(type='NONTERMINAL', value='declaration_specifiers')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='type_specifier')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='type_specifier'), Leaf(type='NONTERMINAL', value='declaration_specifiers')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='type_qualifier')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='type_qualifier'), Leaf(type='NONTERMINAL', value='declaration_specifiers')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='function_specifier')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='function_specifier'), Leaf(type='NONTERMINAL', value='declaration_specifiers')])])]), Rule(name='init_declarator_list', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='init_declarator')]), ProductionPart(optional=False, star=True, items=[Leaf(type='LITERAL', value=','), Leaf(type='NONTERMINAL', value='init_declarator')])])]), Rule(name='init_declarator', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='declarator')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value='='), Leaf(type='NONTERMINAL', value='initializer')])])]), Rule(name='storage_class_specifier', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='typdef')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='extern')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='static')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='auto')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='register')])])]), Rule(name='type_specifier', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='void')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='char')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='short')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='int')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='long')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='float')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='double')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='signed')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='unsigned')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='_Bool')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='_Complex')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='struct_or_union_specifier')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='enum_specifier')])])]), Rule(name='struct_or_union_specifier', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='struct_or_union'), Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='struct_declaration_list'), Leaf(type='LITERAL', value='}')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='struct_or_union'), Leaf(type='TERMINAL', value='IDENTIFIER')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='struct_declaration_list'), Leaf(type='LITERAL', value='}')])])]), Rule(name='struct_or_union', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='struct')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='union')])])]), Rule(name='struct_declaration_list', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='struct_declaration')]), ProductionPart(optional=False, star=True, items=[Leaf(type='NONTERMINAL', value='struct_declaration')])])]), Rule(name='struct_declaration', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='specifier_qualifier_list'), Leaf(type='NONTERMINAL', value='struct_declarator_list')])])]), Rule(name='specifier_qualifier_list', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='type_specifier')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='specifier_qualifier_list')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='type_qualifier')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='specifier_qualifier_list')])])]), Rule(name='struct_declarator_list', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='struct_declarator')]), ProductionPart(optional=False, star=True, items=[Leaf(type='LITERAL', value=','), Leaf(type='NONTERMINAL', value='struct_declarator')])])]), Rule(name='struct_declarator', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value=':'), Leaf(type='NONTERMINAL', value='constant_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='LITERAL', value=':'), Leaf(type='NONTERMINAL', value='constant_expression')])])]), Rule(name='enum_specifier', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='enum'), Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='enumerator_list'), Leaf(type='LITERAL', value='}')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='enum'), Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='enumerator_list'), Leaf(type='LITERAL', value='}')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='enum'), Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='enumerator_list'), Leaf(type='LITERAL', value=','), Leaf(type='LITERAL', value='}')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='enum'), Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='enumerator_list'), Leaf(type='LITERAL', value=','), Leaf(type='LITERAL', value='}')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='enum'), Leaf(type='TERMINAL', value='IDENTIFIER')])])]), Rule(name='enumerator_list', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='enumerator')]), ProductionPart(optional=False, star=True, items=[Leaf(type='LITERAL', value=','), Leaf(type='NONTERMINAL', value='enumerator')])])]), Rule(name='enumerator', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='='), Leaf(type='NONTERMINAL', value='constant_expression')])])]), Rule(name='type_qualifier', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='const')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='restrict')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='volatile')])])]), Rule(name='function_specifier', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='inline')])])]), Rule(name='declarator', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='pointer'), Leaf(type='NONTERMINAL', value='direct_declarator')])])]), Rule(name='direct_declarator', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='LITERAL', value=')')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='['), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='['), Leaf(type='NONTERMINAL', value='assignment_expression'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='['), Leaf(type='NONTERMINAL', value='type_qualifier_list'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='['), Leaf(type='NONTERMINAL', value='type_qualifier_list'), Leaf(type='NONTERMINAL', value='assignment_expression'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='['), Leaf(type='LITERAL', value='static'), Leaf(type='NONTERMINAL', value='assignment_expression'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='['), Leaf(type='LITERAL', value='static'), Leaf(type='NONTERMINAL', value='type_qualifier_list'), Leaf(type='NONTERMINAL', value='assignment_expression'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='['), Leaf(type='NONTERMINAL', value='type_qualifier_list'), Leaf(type='LITERAL', value='static'), Leaf(type='NONTERMINAL', value='assignment_expression'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='['), Leaf(type='LITERAL', value='*'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='['), Leaf(type='NONTERMINAL', value='type_qualifier_list'), Leaf(type='LITERAL', value='*'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='parameter_type_list'), Leaf(type='LITERAL', value=')')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='('), Leaf(type='LITERAL', value=')')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='identifier_list'), Leaf(type='LITERAL', value=')')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='['), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='['), Leaf(type='NONTERMINAL', value='assignment_expression'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='['), Leaf(type='NONTERMINAL', value='type_qualifier_list'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='['), Leaf(type='NONTERMINAL', value='type_qualifier_list'), Leaf(type='NONTERMINAL', value='assignment_expression'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='['), Leaf(type='LITERAL', value='static'), Leaf(type='NONTERMINAL', value='assignment_expression'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='['), Leaf(type='LITERAL', value='static'), Leaf(type='NONTERMINAL', value='type_qualifier_list'), Leaf(type='NONTERMINAL', value='assignment_expression'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='['), Leaf(type='NONTERMINAL', value='type_qualifier_list'), Leaf(type='LITERAL', value='static'), Leaf(type='NONTERMINAL', value='assignment_expression'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='['), Leaf(type='LITERAL', value='*'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='['), Leaf(type='NONTERMINAL', value='type_qualifier_list'), Leaf(type='LITERAL', value='*'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='parameter_type_list'), Leaf(type='LITERAL', value=')')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='('), Leaf(type='LITERAL', value=')')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='identifier_list'), Leaf(type='LITERAL', value=')')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_declarator')])])]), Rule(name='pointer', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='*')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='*'), Leaf(type='NONTERMINAL', value='type_qualifier_list')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='*'), Leaf(type='NONTERMINAL', value='pointer')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='*'), Leaf(type='NONTERMINAL', value='type_qualifier_list'), Leaf(type='NONTERMINAL', value='pointer')])])]), Rule(name='type_qualifier_list', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='type_qualifier')]), ProductionPart(optional=False, star=True, items=[Leaf(type='NONTERMINAL', value='type_qualifier')])])]), Rule(name='parameter_type_list', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='parameter_list')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='parameter_list'), Leaf(type='LITERAL', value=','), Leaf(type='LITERAL', value='...')])])]), Rule(name='parameter_list', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='parameter_declaration')]), ProductionPart(optional=False, star=True, items=[Leaf(type='LITERAL', value=','), Leaf(type='NONTERMINAL', value='parameter_declaration')])])]), Rule(name='parameter_declaration', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='declaration_specifiers'), Leaf(type='NONTERMINAL', value='declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='declaration_specifiers')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='declaration_specifiers'), Leaf(type='NONTERMINAL', value='abstract_declarator')])])]), Rule(name='identifier_list', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER')]), ProductionPart(optional=False, star=True, items=[Leaf(type='LITERAL', value=','), Leaf(type='TERMINAL', value='IDENTIFIER')])])]), Rule(name='type_name', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='specifier_qualifier_list')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='specifier_qualifier_list'), Leaf(type='NONTERMINAL', value='abstract_declarator')])])]), Rule(name='abstract_declarator', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='pointer')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='direct_abstract_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='pointer'), Leaf(type='NONTERMINAL', value='direct_abstract_declarator')])])]), Rule(name='direct_abstract_declarator', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='abstract_declarator'), Leaf(type='LITERAL', value=')')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_abstract_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='['), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_abstract_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='['), Leaf(type='NONTERMINAL', value='assignment_expression'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_abstract_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='['), Leaf(type='LITERAL', value='*'), Leaf(type='LITERAL', value=']')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_abstract_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='LITERAL', value=')')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_abstract_declarator')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='parameter_type_list'), Leaf(type='LITERAL', value=')')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='direct_abstract_declarator')])])]), Rule(name='initializer', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='assignment_expression')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='initializer_list'), Leaf(type='LITERAL', value='}')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='initializer_list'), Leaf(type='LITERAL', value=','), Leaf(type='LITERAL', value='}')])])]), Rule(name='initializer_list', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='initializer')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value=','), Leaf(type='NONTERMINAL', value='initializer_list')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='designation'), Leaf(type='NONTERMINAL', value='initializer')]), ProductionPart(optional=True, star=False, items=[Leaf(type='LITERAL', value=','), Leaf(type='NONTERMINAL', value='initializer_list')])])]), Rule(name='designation', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='designator_list'), Leaf(type='LITERAL', value='=')])])]), Rule(name='designator_list', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='designator')]), ProductionPart(optional=False, star=True, items=[Leaf(type='NONTERMINAL', value='designator')])])]), Rule(name='designator', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='['), Leaf(type='NONTERMINAL', value='constant_expression'), Leaf(type='LITERAL', value=']')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='.'), Leaf(type='TERMINAL', value='IDENTIFIER')])])]), Rule(name='statement', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='labeled_statement')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='compound_statement')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='expression_statement')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='selection_statement')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='iteration_statement')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='jump_statement')])])]), Rule(name='labeled_statement', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value=':'), Leaf(type='NONTERMINAL', value='statement')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='case'), Leaf(type='NONTERMINAL', value='constant_expression'), Leaf(type='LITERAL', value=':'), Leaf(type='NONTERMINAL', value='statement')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='default'), Leaf(type='LITERAL', value=':'), Leaf(type='NONTERMINAL', value='statement')])])]), Rule(name='compound_statement', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='{'), Leaf(type='LITERAL', value='}')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='{'), Leaf(type='NONTERMINAL', value='block_item_list'), Leaf(type='LITERAL', value='}')])])]), Rule(name='block_item_list', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='block_item')]), ProductionPart(optional=False, star=True, items=[Leaf(type='NONTERMINAL', value='block_item')])])]), Rule(name='block_item', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='declaration')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='statement')])])]), Rule(name='expression_statement', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value=';')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='expression'), Leaf(type='LITERAL', value=';')])])]), Rule(name='selection_statement', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='if'), Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='expression'), Leaf(type='LITERAL', value=')'), Leaf(type='NONTERMINAL', value='statement')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='if'), Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='expression'), Leaf(type='LITERAL', value=')'), Leaf(type='NONTERMINAL', value='statement'), Leaf(type='LITERAL', value='else'), Leaf(type='NONTERMINAL', value='statement')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='switch'), Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='expression'), Leaf(type='LITERAL', value=')'), Leaf(type='NONTERMINAL', value='statement')])])]), Rule(name='iteration_statement', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='while'), Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='expression'), Leaf(type='LITERAL', value=')'), Leaf(type='NONTERMINAL', value='statement')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='do'), Leaf(type='NONTERMINAL', value='statement'), Leaf(type='LITERAL', value='while'), Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='expression'), Leaf(type='LITERAL', value=')'), Leaf(type='LITERAL', value=';')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='for'), Leaf(type='LITERAL', value='(')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='expression')]), ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value=';')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='expression')]), ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value=';')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='expression')]), ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value=')'), Leaf(type='NONTERMINAL', value='statement')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='for'), Leaf(type='LITERAL', value='('), Leaf(type='NONTERMINAL', value='declaration')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='expression')]), ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value=';')]), ProductionPart(optional=True, star=False, items=[Leaf(type='NONTERMINAL', value='expression')]), ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value=')'), Leaf(type='NONTERMINAL', value='statement')])])]), Rule(name='jump_statement', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='goto'), Leaf(type='TERMINAL', value='IDENTIFIER'), Leaf(type='LITERAL', value=';')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='continue'), Leaf(type='LITERAL', value=';')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='break'), Leaf(type='LITERAL', value=';')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='return'), Leaf(type='LITERAL', value=';')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='LITERAL', value='return'), Leaf(type='NONTERMINAL', value='expression'), Leaf(type='LITERAL', value=';')])])]), Rule(name='translation_unit', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='external_declaration')]), ProductionPart(optional=False, star=True, items=[Leaf(type='NONTERMINAL', value='external_declaration')])])]), Rule(name='external_declaration', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='function_definition')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='declaration')])])]), Rule(name='function_definition', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='declaration_specifiers'), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='NONTERMINAL', value='compound_statement')])]), Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='declaration_specifiers'), Leaf(type='NONTERMINAL', value='declarator'), Leaf(type='NONTERMINAL', value='declaration_list'), Leaf(type='NONTERMINAL', value='compound_statement')])])]), Rule(name='declaration_list', productions=[Production(items=[ProductionPart(optional=False, star=False, items=[Leaf(type='NONTERMINAL', value='declaration')]), ProductionPart(optional=False, star=True, items=[Leaf(type='NONTERMINAL', value='declaration')])])])])
parser = Parser(grammar)
